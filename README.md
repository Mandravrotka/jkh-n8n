# Автоматическая приоритезация заявок домового чата ЖКХ

Система на основе локальной LLM (Ollama) для автоматического определения приоритета заявок жильцов по шкале 1–6 с учётом социального статуса и угрозы для окружающих.

## Возможности

- Анализ текста заявки на русском языке
- Учёт статуса жильца (пенсионер, инвалид, многодетная семья)
- Проверка осмысленности заявки (фильтрация троллинга/бреда)
- Простой веб-интерфейс для тестирования

## Шкала приоритетов

| Приоритет | Критерии |
|-----------|----------|
| **1** | Угроза жизни: газ, пожар, дым, искрение проводки |
| **2** | Угроза здоровью: затопление, лед перед входной дверью |
| **3** | Серьёзное неудобство: нет ГВС >1 дня, мусор в подъезде, застрял лифт с людьми |
| **4** | Бытовая проблема: течёт кран, скрипит дверь |
| **5** | Эстетика: грязные окна, сколы на стенах, паутина |
| **6** | Пожелание: «хотим», «установите», «покрасьте» |

## Технологии

- **Ollama** — локальный запуск LLM (модель `gemma3:4b`)
- **n8n** — платформа для автоматизации рабочих процессов
- **Docker Compose** — унифицированное развёртывание

## Для начала работы

Установите зависимости: выполните в PowerShell `winget install Ollama.Ollama`, затем `ollama pull gemma3:4b`, после этого установите Docker Desktop через `winget install Docker.DockerDesktop`. 

Запустите Ollama в отдельном терминале командой `ollama serve`. 

Скопируйте шаблон окружения: `copy .env.example .env`, а после измените значения на свои. 

Запустите n8n через Docker Compose командой `docker-compose up -d`. 

Импортируйте конфигурацию: перейдите в папку `setup` и выполните `powershell -ExecutionPolicy Bypass -File .\init.ps1` — скрипт автоматически импортирует credentials и workflow. 

Откройте в браузере `http://localhost:5678`, найдите воркфлоу «jkh-priority-workflow» и активируйте его. 

Теперь откройте файл `interface.html` в браузере — система готова к тестированию.

## Тесты

Для запуска тестов перейдите в папку `tests` и выполните `powershell -ExecutionPolicy Bypass -File .\run-tests.ps1`.