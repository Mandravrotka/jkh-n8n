# Автоматическая приоритезация заявок домового чата ЖКХ

Система на основе локальной LLM (Ollama) для автоматического определения приоритета заявок жильцов по шкале 1–6 с учётом социального статуса и угрозы для окружающих.

## Возможности

- Анализ текста заявки на русском языке
- Учёт статуса жильца (пенсионер, инвалид, многодетная семья)
- Проверка осмысленности заявки (фильтрация троллинга/бреда)
- Простой веб-интерфейс для тестирования

## Шкала приоритетов

| Приоритет | Критерии |
|-----------|----------|
| **1** | Угроза жизни: газ, пожар, дым, искрение проводки|
| **2** | Угроза здоровью: затопление, лед перед входной дверью |
| **3** | Серьёзное неудобство: нет ГВС >1 дня, мусор в подъезде, застрял лифт с людьми |
| **4** | Бытовая проблема: течёт кран, скрипит дверь |
| **5** | Эстетика: грязные окна, сколы на стенах, паутина |
| **6** | Пожелание: «хотим», «установите», «покрасьте» |

- **Ollama** — локальный запуск LLM (модель `gemma3:4b`)

## Для начала работы

### 1. Установите зависимости

```powershell
# Ollama
winget install Ollama.Ollama
ollama pull gemma3:4b

# Docker + n8n
winget install Docker.DockerDesktop
docker run -it --rm --name n8n -p 5678:5678 -v n8n_data:/home/node/.n8n docker.n8n.io/n8nio/n8n
```

### 2. Импортируйте воркфлоу

1. Откройте `http://localhost:5678`
2. `☰ → Import` → выберите `workflow/n8n-workflow.json`
3. Нажмите Public в верхней части экрана

### 3. Запустите интерфейс

Откройте `interface.html` в браузере — готово к тестированию!

### Тесты

```powershell
cd tests
powershell -ExecutionPolicy Bypass -File .\run-tests.ps1
```